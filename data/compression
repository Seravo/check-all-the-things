[gzip-test]
files = *.gz *.tgz
types = application/gzip
command = gzip --test {files}
not-dirs = .git .svn .bzr CVS .hg _darcs _FOSSIL_ .sgdrawer

[bzip2-test]
apt = bzip2
files = *.bz2 *.tbz
types = application/x-bzip2
command = bzip2 --test {files}
not-dirs = .git .svn .bzr CVS .hg _darcs _FOSSIL_ .sgdrawer

[xz-test]
apt = xz-utils
files = *.xz *.txz
types = application/x-xz
command = xz --test {files}
not-dirs = .git .svn .bzr CVS .hg _darcs _FOSSIL_ .sgdrawer

[lzma-test]
apt = xz-utils
files = *.lzma
types = application/x-lzma
command = lzma --test {files}
not-dirs = .git .svn .bzr CVS .hg _darcs _FOSSIL_ .sgdrawer

[lzo-test]
apt = lzop
files = *.lzo
command = lzop --test {files}
not-dirs = .git .svn .bzr CVS .hg _darcs _FOSSIL_ .sgdrawer

[lzip-test]
apt = lzip
files = *.lzip
types = application/x-lzip
command = lzip --test {files}
not-dirs = .git .svn .bzr CVS .hg _darcs _FOSSIL_ .sgdrawer

[unzip-test]
apt = unzip
# Extension list from the File Formats wiki:
# http://fileformats.archiveteam.org/wiki/Category:ZIP_based_file_formats
# TODO: update it before releases:
# echo ' *.xpi *.sb2 *.pk3 *.wz *.love'
# curl -s http://fileformats.archiveteam.org/wiki/Category:ZIP_based_file_formats |
# sed -n '/ bodycontent/,/\/bodycontent/p' |
# sed -n 's_.*\(/wiki/[^"]*\).*_\1_p' |
# xargs -n1 -i_ curl -s 'http://fileformats.archiveteam.org_?action=raw' |
# grep extensions= |
# sed 's_| *extensions *= *_ _;s_{{ext|\([^}]*\)}} *,* *_*.\1 _g;s_others__;s/ *$//'
files =
 *.zip
 *.jar *.apk *.xpi *.ipa *.sb2 *.pk3 *.wz *.love
 *.docx *.xlsx *.pptx *.xlsb
 *.odm *.odt *.ods *.odg *.odp *.odc *.odi *.odf *.odb *.ott *.ots *.otg *.otp *.otc *.oti *.otf *.oth *.fodt *.fods *.fodg *.fodp
 *.ggb *.maff *.cbz *.ora
 *.epub *.oxps *.xps
 *.otx
 *.pkpass
 *.itz
 *.svx
types = application/zip
command = unzip -q -t {file} | grep -v '^No errors detected in compressed data of '
not-dirs = .git .svn .bzr CVS .hg _darcs _FOSSIL_ .sgdrawer

[7z-test]
apt = p7zip
files = *.7z
types = application/x-7z-compressed
command = 7zr t {file} | grep --perl-regexp --null-data --only-matching '(?s)Processing archive: .*\n\nError[^\n]*' | tr -s '\n'
not-dirs = .git .svn .bzr CVS .hg _darcs _FOSSIL_ .sgdrawer

[rzip-test]
flags = todo
comment = the --test argument is not supported and runzip -o /dev/null gives an error
apt = rzip
files = *.rz
command = rzip --test {files}
not-dirs = .git .svn .bzr CVS .hg _darcs _FOSSIL_ .sgdrawer

[lrzip-test]
flags = todo
comment = All the tests I did killed my computer
apt = lrzip
files = *.lrz
command = lrzip --test {files}
not-dirs = .git .svn .bzr CVS .hg _darcs _FOSSIL_ .sgdrawer

# vim:ft=dosini
